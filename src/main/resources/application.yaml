spring:
  application:
    name: auth
  r2dbc:
    url: ${DB_R2DBC_URL:r2dbc:postgresql://localhost:5432/auth}
    username: ${DB_USERNAME:auth}
    password: ${DB_PASSWORD:auth}
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
  flyway:
    enabled: ${DB_MIGRATION_ENABLED:true}
    url: ${DB_JDBC_URL:jdbc:postgresql://localhost:5432/auth}
    user: ${DB_USERNAME:auth}
    password: ${DB_PASSWORD:auth}
    locations: classpath:db/migration

server:
  forward-headers-strategy: framework

security:
  jwt:
    issuer: ${JWT_ISSUER:aandiclub-auth}
    audience: ${JWT_AUDIENCE:aandiclub-api}
    secret: ${JWT_SECRET:change-this-secret-at-least-32-bytes-long}
    access-token-exp-seconds: ${JWT_ACCESS_EXP_SECONDS:3600}
    refresh-token-exp-seconds: ${JWT_REFRESH_EXP_SECONDS:5184000}
    clock-skew-seconds: ${JWT_CLOCK_SKEW_SECONDS:30}

app:
  openapi:
    server-url: ${APP_OPENAPI_SERVER_URL:}
  cors:
    allowed-origins: ${APP_CORS_ALLOWED_ORIGINS:http://localhost:8080,http://127.0.0.1:8080,https://aandiclub.com,https://admin.aandiclub.com,https://auth.aandiclub.com,https://api.aandiclub.com}
    allowed-methods: ${APP_CORS_ALLOWED_METHODS:GET,POST,PUT,PATCH,DELETE,OPTIONS}
    allowed-headers: ${APP_CORS_ALLOWED_HEADERS:Authorization,Content-Type,Accept,Origin,X-Requested-With}
    exposed-headers: ${APP_CORS_EXPOSED_HEADERS:}
    allow-credentials: ${APP_CORS_ALLOW_CREDENTIALS:true}
    max-age-seconds: ${APP_CORS_MAX_AGE_SECONDS:3600}
  bootstrap-admin:
    enabled: ${BOOTSTRAP_ADMIN_ENABLED:true}
    username: ${BOOTSTRAP_ADMIN_USERNAME:admin}
    password: ${BOOTSTRAP_ADMIN_PASSWORD:}
  invite:
    activation-base-url: ${APP_INVITE_ACTIVATION_BASE_URL:https://your-domain.com/activate}
    expiration-hours: ${APP_INVITE_EXPIRATION_HOURS:72}
  profile:
    allowed-image-hosts: ${APP_PROFILE_ALLOWED_IMAGE_HOSTS:}
  profile-image:
    enabled: ${APP_PROFILE_IMAGE_ENABLED:false}
    bucket: ${APP_PROFILE_IMAGE_BUCKET:}
    region: ${APP_PROFILE_IMAGE_REGION:ap-northeast-2}
    key-prefix: ${APP_PROFILE_IMAGE_KEY_PREFIX:profiles}
    public-base-url: ${APP_PROFILE_IMAGE_PUBLIC_BASE_URL:}
    upload-url-expiration-seconds: ${APP_PROFILE_IMAGE_UPLOAD_URL_EXPIRATION_SECONDS:600}
    max-upload-bytes: ${APP_PROFILE_IMAGE_MAX_UPLOAD_BYTES:5242880}
    allowed-content-types: ${APP_PROFILE_IMAGE_ALLOWED_CONTENT_TYPES:image/jpeg,image/png,image/webp}

springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    display-request-duration: true

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: never
